\chapter{Concept}
\label{chap:concept}

\section{Introduction}
% Recap of the research problem and objectives of this chapter.
This chapter presents the conceptual design of an XR-based assistance system aimed at enhancing the safety and ergonomics of industrial workers. Building on the theoretical foundations outlined in Chapter \ref{chap:theoretical_background}, it details the system requirements, architectural framework, posture analysis and hazard detection concepts, feedback modalities, interaction design, and evaluation criteria. The goal is to provide a comprehensive framework that addresses the identified challenges by utilizing the capabilities of wearable technologies and XR environments. This conceptual framework serves as a foundation for the subsequent implementation and evaluation phases of the project.

\section{System Requirements and Constraints}
The XR-based assistance system's design is guided by a set of functional and non-functional requirements, as well as hardware and software constraints.
These requirements ensure that the system effectively addresses the needs of industrial workers while adhering to practical limitations.

\subsection{Functional Requirements}
In order to give appropriate feedback on the users posture and the surrounding hazards the system needs to achieve a multitude of functional requirements. 
Accurate real-time posture tracking is essential for effective application of ergonomic assessment models like RULA. Due to the Teslasuit's use of accelerometers the system also needs to be able to calibrate the sensors to minimize the effect of drift over time. In addition the system needs to correctly place the user in the XR environment and align the real-world coordinates with the XR coordinates. This is necessary to accurately assess the users proximity to hazard zones. For the system to be accesible to workers it also needs to provide a user-friendly interface which allows easy calibration and minimal interaction during tasks. The system also needs to be able to integrate with existing industrial systems like GAIA to leverage existing infrastructure and data. In order to be able to properly analyze the data the system also needs to log relevant data for later assessment. Finally the system needs to provide haptic and visual feedback to alert workers of unsafe postures and hazards in their environment.

\subsection{Non-functional Requirements}
To fulfill its functional requirements the system also needs to meet several non-functional requirements. 
The system must operate with low latency to ensure timely feedback. It should be reliable, minimizing false positives and ensuring consistent performance in industrial environments. The system should be intuitive and require minimal training for workers to use effectively. Additionally, the system should be non-intrusive, allowing workers to perform their tasks without significant disruption. The system should also be scalable to accommodate different industrial settings and adaptable to various tasks and environments.

\subsection{Hardware and Software Constraints}
The design of the XR-based assistance system is influenced by several hardware and software constraints. 
Most notably the teslasuit introduces several limitations. In order to transmit data from the teslasuit a software provided by the manufacturer is required. sadly this software only runs on windows which means a device running windows is required for the system. Due to this limitation the software also needs to be distributed between the Meta Quest 3 and a windows PC. Due to the Teslasuit using IMUs for motion tracking the posture detection is subject to drift over time and will need to be calibnrated occasionally. Additionally there is no way for the Teslasuit to detect whether a body part is resting on a surface which rules out certain aspects of ergonomic assessment models like RULA. The battery life of the Teslasuit and Meta Quest 3 also limits the duration of use before recharging is necessary. The comfort of wearing the XR headset for extended periods is another consideration, as discomfort could affect worker compliance. Finally, maintaining a stable wireless connection between the wearable devices and the processing unit is crucial for real-time data transmission and feedback.

\section{Interaction Design}
The interaction design is focused on ensuring that the system requires minimal input from the user, while still providing accruate and effective feedback. The system is designed to be as non-intrusive as possible, allowing workers to focus on their tasks without being overwhelmed by alerts or notifications. Aside from the initial setup and calibration, the system operates without additional user input aside from periodic recalibration of the Teslasuit. The user interface is designed to be intuitive and easy to navigate, allowing users to autonomously setup and adjust the system as needed.

\subsection{Avoiding Information Overload}
An important aspect of the interaction design is avoiding information overload. There are several strategies implemented to achieve this. Firstly the system categorizes alerts into low, medium, and high priority levels. Low priority alerts are subtle and non-intrusive by triggering only localized low intensity haptic feedback. Medium priority alerts are more noticeable by triggering higher intensity haptic feed and visual cues in case of proximity to hazard zones. High priority alerts are designed to be as intrusive as necessary to ensure immediate attention, employing strong haptic feedback and prominent visual warnings. When multiple alerts occur simultaneously the system prioritizes them based on severity, ensuring that the most critical information is communicated first.
 Additionally the system employs adaptive alert frequency, reducing the frequency of alerts during periods of low risk to prevent alert fatigue. Personalization options allow users to adjust the intensity and type of feedback according to their preferences, further enhancing usability. Finally an option to temporarily ignore alerts is provided, allowing users to focus on critical tasks without being distracted by non-urgent notifications this option can also be activated by removing the Meta Quest 3. 

\subsection{Safety-Critical Design Considerations}
There are several safety-critical design considerations that need to be considered. Firstly the system needs to offer the user to define zones where no visual alerts should be shown in order to avoid obstructing the vision of critical components such as warning lights or signs. The system also needs to handle sensor failures gracefully by providing default feedback in case of lost tracking or sensor errors. Additionally the system needs to minimize false positives to avoid alert fatigue and ensure that users remain responsive to alerts.

\section{Framework Architecture}
Due to the software limitations the Framework is distributed between the Meta Quest 3 and a windows PC which will handle the data and most of the computation. Which has the advantage of allowing the use of more powerful hardware for data processing. Due to this the Meta Quest 3 will primarily handle XR rendering and user interaction resulting in lower latency and higher frame rates. The Windows PC will handle data acquisition from the Teslasuit, posture analysis, hazard detection, and integration with industrial systems like GAIA. The two devices will communicate via Unity's native networking capabilities. This architecture allows for efficient distribution of tasks while leveraging the strengths of each device.

\subsection{Hardware Components}
The XR-based assistance system requires serveral hardware components to function effectively. First and foremost the XR-based assistance system requires an XR headset to provide the spatial tracking and visual feedback. The Meta Quest 3 is chosen for its low cost, standalone capabilities, spatial tracking features and widespread adoption. The Teslasuit is used for posture tracking and biometric data collection due to its comprehensive sensor suite and haptic feedback capabilities. A Windows PC is necessary to run the Teslasuit software and handle data processing tasks that exceed the capabilities of the Meta Quest 3. Additionally the system will integrate with existing industrial systems like GAIA to leverage existing infrastructure and data. Optionally additional sensors like smart watches can be integrated to provide supplementary biometric data.

\subsection{Communication Protocols}
The system employs several communication protocols to ensure efficient and reliable data transmission between components.
LabStreamingLayer is used for low-latency synchronized collection of all sensor data streams, including posture and biometric data from the Teslasuit. MQTT is utilized for lightweight messaging and integration with industrial systems like GAIA, allowing for efficient data exchange and command execution. Unity's native networking capabilities facilitate communication between the Meta Quest 3 and the Windows PC, ensuring seamless interaction and data flow between the two devices.

\section{Posture Analysis Concept}
The posture analysis component of the XR-based assistance system is designed to monitor and assess the ergonomic risk of the user's posture in real-time. This is achieved through the use of the Teslasuit's IMU sensors to capture angle data for the bodyparts which is then trasnformed into joint angles to be analyzed using a simplified version of the Rapid Upper Limb Assessment (RULA) model. the angles will be continuosly sampled and assessed to provide timely feedback to the user.
\subsection{Ergonomic Assessment Model}
To assess the ergonomic risk of the user's posture the System uses a simplified version of RULA where limbs and the torso will be scored individually to apply localized feedback. The ergonomic risk will also be aggregated into an overall score to provide a general overview of the user's posture. The ergonomic assessment will be performed at regular intervals to provide timely feedback without overwhelming the user.
For the purpose of providing feedback to the user the ergonomic risk levels are mapped into three categories:
\begin{itemize}
    \item Low Risk: No action needed
    \item Medium Risk: Subtle corrective feedback (haptic, visual)
    \item High Risk: Strong alert to prompt immediate correction
\end{itemize}
Additionally the scores will be continuously logged for later analysis and statistics. 
\subsection{RULA Scoring Adaptation}
The scores are determined based on the RULA scoring system as described by McAtamney and Corlett \cite{mcatamney1993rula}. However due to the limitations of the Teslasuit's IMU-based tracking system some adaptations are necessary. 
The RULA scoring system is divided into two sections with respectively 4 and 3 subcategories corresponding to different body parts. The first section (A) evaluates the upper arm, lower arm, wrist, and wrist twist, while the second section (B) assesses the neck, trunk, and legs. Each body part is assigned a score based on its position and movement, which are then combined to produce an overall risk score. Addtionally muscle use and force/load scores are added to the overall score of both categories. The force score is disregarded in this implementation due to the lack of force sensors in the Teslasuit.
The wrist twist, wrist position and leg score is also disregarded due to missing sensors needed to determine these scores.
To account for the lack of these scores they will be assumed to be in a neutral position and assigned the lowest possible score. This means that the overall ergonomic risk may be underestimated, especially in tasks that involve significant wrist movement or leg strain. However, this adaptation allows for an ergonomic assessment using the available data from the Teslasuit and The Meta Quest 3. Additionally to avoid overwhelming the user with constant feedback, as is one of the stated goals of this system, the assessment should slightly underestimate the risk in some cases rather than overestimate it and cause alert fatigue. 

\section{Hazard Detection Concept}
The Hazards are defined as a cubical or spherical volume in the XR environment it's position and size can be defined by the user during setup. The current Hazard Level is determined by a preset rule which can use data from a predefined LSL stream.
Each hazard zone can be individually and manually adjusted if the environment changes.
The system continuosly monitors the position of the user and their limbs, using the Meta Quest 3 and the Teslasuit, in order to determine their proximity to the defined hazard zones. If the user enters a hazard zone or comes within a predefined distance of it, the system triggers an alert through haptic and/or visual feedback. The hazard detection is performed in real-time to ensure timely alerts and enhance worker safety. 

\section{Feedback Modalities}
The system employs both haptic and visual feedback to communicate with the users. 

The haptic feedback will be delivered in form of local cues for posture correction and hazard proximity with intensity scaling depending on urgency. This localized approach ensures that the user can intuitively understand which part of their body requires attention, enhancing the effectiveness of the feedback. Haptic feedback is prioritized due to its ability to provide immediate cues that contribute little to cognitive load except for immediate or high hazard scenarios. 


Visual feedback will be provided through the XR headset, utilizing non-intrusive overlays and indicators to alert users of hazards and ergonomic issues. The visual feedback is designed to complement the haptic cues, providing additional context without overwhelming the user. Visual feedback will primarily be used for hazard alerts, leveraging the XR environment's capabilities to highlight danger zones and provide spatial awareness. While also providing subtle visual cues for posture correction on longer or repeated poor posture. The visual feedback is designed to be minimalisitc and will be color coded to indicate the severity of the alert.


\section{Evaluation Criteria}
In order to evaluate the effectiveness of the conceptual design, several criteria are established. These criteria focus on the system's ability to meet functional and non-functional requirements, as well as its overall usability and integration capabilities. 
These criteria include:
\begin{itemize}
    \item Posture Detection Accuracy: The system should accurately detect and assess user posture, with a target accuracy of within 5 degrees for joint angles.
    \item Hazard Detection Reliability: The system should reliably detect proximity to hazard zones, with a low rate of false positives and negatives.
    \item Latency: The system should operate with low latency, ideally below 200ms, to ensure timely feedback.
    \item User Experience: The system should be user-friendly, requiring minimal training and allowing for easy calibration and adjustment.
    \item Integration: The system should seamlessly integrate with existing industrial systems like GAIA, leveraging existing infrastructure and data.
\end{itemize}

\section{Summary and Transition}
Research Questions Addressed:
-Posture monitoring accuracy
-Hazard detection reliability
-Latency thresholds
-Spatial alignment
% Recap of the conceptual design and transition to Implementation.
